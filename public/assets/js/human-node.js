(() => {
  if (document.body.dataset.page !== "human-nodes") return;

  const profileData = {
    self: {
      name: "My Human node",
      tier: "Legate",
      status: "Active human node",
      address: "0x91a4…de01",
      faction: "Protocol Engineering",
      cscore: "86 / 100",
      mscore: "74 / 100",
      nodeUptime: "3y 5m",
      govTenure: "2y 7m",
      activeNode: "Yes",
      acceptedProposals: "11",
      chambers: "Protocol Engineering, Security",
      formationProjects: "3",
      currentProjects: "Orbital Mesh, SybilGuard",
      activeStreak: "21 eras",
      activeNow: "Yes",
      quorum: "97%",
      potDuration: "34 epochs (~5.8 weeks)",
      potStatus: "Active validator",
      potGovernor: "22 epochs",
      podProposals: "2",
      podChambers: "Protocol · Social",
      podProjects: "Monitoring Kit, Delegation UX",
      pogDuration: "18 epochs",
      pogStatus: "Yes",
    },
    mozgiii: {
      name: "Mozgiii",
      tier: "Citizen",
      status: "Active human node",
      address: "0xmoz…77a",
      faction: "Protocol Keepers · Research Loop",
      cscore: "92 / 100",
      mscore: "88 / 100",
      nodeUptime: "4y 1m",
      govTenure: "3y 8m",
      activeNode: "Yes",
      acceptedProposals: "11",
      chambers: "Protocol Engineering, Research",
      formationProjects: "4",
      currentProjects: "Multimodal Biometrics, Treasury Simulator",
      activeStreak: "34 eras",
      activeNow: "Yes",
      quorum: "99%",
      potDuration: "41 epochs",
      potStatus: "Validator",
      potGovernor: "29 epochs",
      podProposals: "6",
      podChambers: "Protocol · Research",
      podProjects: "Multimodal Biometrics, Treasury Simulator",
      pogDuration: "29 epochs",
      pogStatus: "Yes",
    },
    victor: {
      name: "Victor",
      tier: "Consul",
      status: "Active human node",
      address: "0xvic…a3c",
      faction: "Treasury Circle",
      cscore: "88 / 100",
      mscore: "91 / 100",
      nodeUptime: "3y 9m",
      govTenure: "3y 0m",
      activeNode: "Yes",
      acceptedProposals: "7",
      chambers: "Economics, Treasury",
      formationProjects: "2",
      currentProjects: "Adaptive Fees, Vault Ops",
      activeStreak: "29 eras",
      activeNow: "Yes",
      quorum: "96%",
      potDuration: "33 epochs",
      potStatus: "Validator",
      potGovernor: "25 epochs",
      podProposals: "7",
      podChambers: "Economics · Treasury",
      podProjects: "Adaptive Fees",
      pogDuration: "25 epochs",
      pogStatus: "Yes",
    },
    dima: {
      name: "Dima",
      tier: "Legate",
      status: "Active human node",
      address: "0xdim…42e",
      faction: "Nodewrights",
      cscore: "74 / 100",
      mscore: "88 / 100",
      nodeUptime: "3y 2m",
      govTenure: "2y 4m",
      activeNode: "Yes",
      acceptedProposals: "5",
      chambers: "Protocol Engineering",
      formationProjects: "2",
      currentProjects: "Monitoring Kit",
      activeStreak: "23 eras",
      activeNow: "Yes",
      quorum: "93%",
      potDuration: "28 epochs",
      potStatus: "Validator",
      potGovernor: "20 epochs",
      podProposals: "3",
      podChambers: "Protocol",
      podProjects: "Monitoring Kit",
      pogDuration: "20 epochs",
      pogStatus: "Yes",
    },
    tony: {
      name: "Tony",
      tier: "Tribune",
      status: "Active human node",
      address: "0xton…5a2",
      faction: "Outreach Guild",
      cscore: "68 / 100",
      mscore: "80 / 100",
      nodeUptime: "2y 7m",
      govTenure: "1y 6m",
      activeNode: "Yes",
      acceptedProposals: "3",
      chambers: "Social, Education",
      formationProjects: "2",
      currentProjects: "Mentorship Collective",
      activeStreak: "14 eras",
      activeNow: "Yes",
      quorum: "88%",
      potDuration: "22 epochs",
      potStatus: "Validator",
      potGovernor: "14 epochs",
      podProposals: "3",
      podChambers: "Social · Education",
      podProjects: "Mentorship Collective",
      pogDuration: "14 epochs",
      pogStatus: "Yes",
    },
    sesh: {
      name: "Sesh",
      tier: "Citizen",
      status: "Active human node",
      address: "0xses…901",
      faction: "Research Loop",
      cscore: "95 / 100",
      mscore: "94 / 100",
      nodeUptime: "4y 3m",
      govTenure: "3y 10m",
      activeNode: "Yes",
      acceptedProposals: "14",
      chambers: "Research, General",
      formationProjects: "5",
      currentProjects: "Liveness Audits",
      activeStreak: "37 eras",
      activeNow: "Yes",
      quorum: "99%",
      potDuration: "45 epochs",
      potStatus: "Validator",
      potGovernor: "33 epochs",
      podProposals: "8",
      podChambers: "Research · General",
      podProjects: "Liveness Audits",
      pogDuration: "33 epochs",
      pogStatus: "Yes",
    },
    peter: {
      name: "Peter",
      tier: "Consul",
      status: "Active human node",
      address: "0xpet…c1a",
      faction: "Logistics Core",
      cscore: "82 / 100",
      mscore: "86 / 100",
      nodeUptime: "3y 7m",
      govTenure: "2y 9m",
      activeNode: "Yes",
      acceptedProposals: "9",
      chambers: "Formation Logistics",
      formationProjects: "4",
      currentProjects: "Treasury Simulator, Monitoring Kit",
      activeStreak: "25 eras",
      activeNow: "Yes",
      quorum: "95%",
      potDuration: "31 epochs",
      potStatus: "Validator",
      potGovernor: "24 epochs",
      podProposals: "4",
      podChambers: "Formation Logistics",
      podProjects: "Treasury Simulator",
      pogDuration: "24 epochs",
      pogStatus: "Yes",
    },
    shannon: {
      name: "Shannon",
      tier: "Legate",
      status: "Active human node",
      address: "0xsha…bb4",
      faction: "Guardian Forum",
      cscore: "76 / 100",
      mscore: "90 / 100",
      nodeUptime: "3y 1m",
      govTenure: "2y 2m",
      activeNode: "Yes",
      acceptedProposals: "6",
      chambers: "Compliance",
      formationProjects: "2",
      currentProjects: "Compliance Charter, Treasury Audit",
      activeStreak: "21 eras",
      activeNow: "Yes",
      quorum: "94%",
      potDuration: "27 epochs",
      potStatus: "Validator",
      potGovernor: "19 epochs",
      podProposals: "3",
      podChambers: "Compliance",
      podProjects: "Compliance Charter",
      pogDuration: "19 epochs",
      pogStatus: "Yes",
    },
    sasha: {
      name: "Sasha",
      tier: "Tribune",
      status: "Active human node",
      address: "0xsa…21f",
      faction: "Deterrence Watch",
      cscore: "70 / 100",
      mscore: "82 / 100",
      nodeUptime: "2y 6m",
      govTenure: "1y 5m",
      activeNode: "Yes",
      acceptedProposals: "4",
      chambers: "Security",
      formationProjects: "1",
      currentProjects: "Validator Hardening",
      activeStreak: "15 eras",
      activeNow: "Yes",
      quorum: "89%",
      potDuration: "20 epochs",
      potStatus: "Validator",
      potGovernor: "13 epochs",
      podProposals: "2",
      podChambers: "Security",
      podProjects: "Validator Hardening",
      pogDuration: "13 epochs",
      pogStatus: "Yes",
    },
  };

  const params = new URLSearchParams(window.location.search);
  const targetId = params.get("id") || "self";

  const $ = (selector) => document.querySelector(selector);
  const fields = {
    heading: $("[data-profile-name-heading]"),
    name: $("[data-profile-name]"),
    tier: $("[data-profile-tier]"),
    status: $("[data-profile-status]"),
    address: $("[data-profile-address]"),
    faction: $("[data-profile-faction]"),
    cscore: $("[data-profile-cscore]"),
    mscore: $("[data-profile-mscore]"),
    potDuration: $("[data-pot-duration]"),
    potStatus: $("[data-pot-status]"),
    potGovernor: $("[data-pot-governor]"),
    podProposals: $("[data-pod-proposals]"),
    podChambers: $("[data-pod-chambers]"),
    podProjects: $("[data-pod-projects]"),
    pogDuration: $("[data-pog-duration]"),
    pogStatus: $("[data-pog-status]"),
  };

  const setField = (node, value) => {
    if (node) node.textContent = value;
  };

  const renderProfile = (id) => {
    const data = profileData[id] || profileData.self;
    setField(fields.heading, data.name);
    setField(fields.name, data.name);
    setField(fields.tier, data.tier);
    setField(fields.status, data.status);
    setField(fields.address, data.address);
    setField(fields.faction, data.faction);
    setField(fields.cscore, data.cscore);
    setField(fields.mscore, data.mscore);
    setField(fields.potDuration, data.potDuration);
    setField(fields.potStatus, data.potStatus);
    setField(fields.potGovernor, data.potGovernor);
    setField(fields.podProposals, data.podProposals);
    setField(fields.podChambers, data.podChambers);
    setField(fields.podProjects, data.podProjects);
    setField(fields.pogDuration, data.pogDuration);
    setField(fields.pogStatus, data.pogStatus);
  };

  const tabButtons = document.querySelectorAll(".profile-tab");
  const tabPanels = document.querySelectorAll("[data-tabpanel]");

  const activateTab = (target) => {
    tabButtons.forEach((btn) => btn.classList.toggle("profile-tab--active", btn.dataset.tab === target));
    tabPanels.forEach((panel) => {
      panel.hidden = panel.dataset.tabpanel !== target;
    });
  };

  tabButtons.forEach((tab) => tab.addEventListener("click", () => activateTab(tab.dataset.tab)));

  activateTab("pot");
  renderProfile(targetId);
})();
